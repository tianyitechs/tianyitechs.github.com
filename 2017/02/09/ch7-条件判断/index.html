<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>条件判断 | Linux基础</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">条件判断</h1><a id="logo" href="/.">Linux基础</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">条件判断</h1><div class="post-meta">Feb 9, 2017<span> | </span><span class="category"><a href="/categories/Shell/">Shell</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#条件测试结构"><span class="toc-number">1.</span> <span class="toc-text">条件测试结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-if-then-结构"><span class="toc-number">1.1.</span> <span class="toc-text">1.if/then 结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-真假判断"><span class="toc-number">1.2.</span> <span class="toc-text">3.真假判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-结构"><span class="toc-number">1.3.</span> <span class="toc-text">4.(( )) 结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件测试操作符"><span class="toc-number">2.</span> <span class="toc-text">文件测试操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-操作符列举"><span class="toc-number">2.1.</span> <span class="toc-text">1.操作符列举</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-举例"><span class="toc-number">2.2.</span> <span class="toc-text">2.举例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二元比较操作符"><span class="toc-number">3.</span> <span class="toc-text">二元比较操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-算术比较与字符串比较"><span class="toc-number">3.1.</span> <span class="toc-text">3.算术比较与字符串比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-检查字符串是否为null"><span class="toc-number">3.2.</span> <span class="toc-text">4.检查字符串是否为null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-zmore"><span class="toc-number">3.3.</span> <span class="toc-text">5.zmore</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-compound-和-comparison"><span class="toc-number">3.4.</span> <span class="toc-text">6.compound 和 comparison</span></a></li></ol></li></ol></div></div><div class="post-content"><h2 id="条件测试结构"><a href="#条件测试结构" class="headerlink" title="条件测试结构"></a>条件测试结构</h2><h3 id="1-if-then-结构"><a href="#1-if-then-结构" class="headerlink" title="1.if/then 结构"></a>1.if/then 结构</h3><p>if/then 结构用来判断命令列表的退出状态码是否为 0，因为0表示成功，如果成功的话，这里应该那么就执行接下来的一个或多个命令。</p>
<p>注意： 这里与C语言的等其它语言不同，不能直接使用0或者1作为判断条件，而应该以false，true代替。以其它大多数语言相反的true返回的是0,false返回的是1</p>
<p>有一个专有命令 [ （左中括号，特殊字符）。这个命令与test命令等价，由于效率上的考虑，bash将它作为一个内建命令。</p>
<p>注意： 由于bash的语法检查机制，如果在条件测试时只使用一个[将会出现一个错误提示，为了避免这个问题，我们通常将使用一对方括号包含条件测试[]</p>
<p>在版本2.02的Bash中, 引入了 “[[ … ]]” 扩展测试命令，[[ 是一个关键字，并不是一个命令。</p>
<p>if 命令能够测试任何命令，并不仅仅是中括号中的条件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim test.sh</div></pre></td></tr></table></figure>
<p>输入代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line"># 逐字节比较a b两个文件是否相同</div><div class="line">if cmp a b &amp;&gt; /dev/null  # 禁止输出.</div><div class="line">then echo &quot;Files a and b are identical.&quot;</div><div class="line">else echo &quot;Files a and b differ.&quot;</div><div class="line">fi</div><div class="line"></div><div class="line"># 非常有用的&quot;if-grep&quot;结构:</div><div class="line"># ------------------------</div><div class="line">if grep -q Bash file</div><div class="line">then echo &quot;File contains at least one occurrence of Bash.&quot;</div><div class="line">fi</div><div class="line"></div><div class="line">word=Linux</div><div class="line">letter_sequence=inu</div><div class="line">if echo &quot;$word&quot; | grep -q &quot;$letter_sequence&quot;</div><div class="line"># &quot;-q&quot; 选项是用来禁止输出的.</div><div class="line">then</div><div class="line"> echo &quot;$letter_sequence found in $word&quot;</div><div class="line">else</div><div class="line"> echo &quot;$letter_sequence not found in $word&quot;</div><div class="line">fi</div><div class="line"></div><div class="line"># 将打印Command failed</div><div class="line">if COMMAND_WHOSE_EXIT_STATUS_IS_0_UNLESS_ERROR_OCCURRED</div><div class="line">then echo &quot;Command succeeded.&quot;</div><div class="line">else echo &quot;Command failed.&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>运行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ bash test.sh</div></pre></td></tr></table></figure>
<p>2.多级比较（应注意与嵌套条件分支区分）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim test.sh</div></pre></td></tr></table></figure>
<p>输入代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line"># 这里应该理解为子if/then当做一个整体作为测试条件</div><div class="line">if echo &quot;Next *if* is part of the comparison for the first *if*.&quot;</div><div class="line">   if [[ $comparison = &quot;integer&quot; ]]</div><div class="line">     then (( a &lt; b )) # (( 算数表达式 ))， 用作算数运算</div><div class="line">   else</div><div class="line">     [[ $a &lt; $b ]]</div><div class="line">   fi</div><div class="line">then</div><div class="line"> echo &apos;$a is less than $b&apos;</div><div class="line">fi</div><div class="line">注意： ((...))和let...如果运算结果为非0，该语句退出码为0，否则为1；[[...]]是作为一个单独的语句并且会返回一个退出码</div></pre></td></tr></table></figure>
<p>运行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ bash test.sh</div></pre></td></tr></table></figure>
<h3 id="3-真假判断"><a href="#3-真假判断" class="headerlink" title="3.真假判断"></a>3.真假判断</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim test.sh</div></pre></td></tr></table></figure>
<p>输入代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">#  小技巧:</div><div class="line">#  如果你不能够确定一个特定的条件该如何进行判断,</div><div class="line">#+ 那么就使用if-test结构.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">echo &quot;Testing \&quot;0\&quot;&quot;</div><div class="line">if [ 0 ]      # zero</div><div class="line">then</div><div class="line">  echo &quot;0 is true.&quot;</div><div class="line">else</div><div class="line">  echo &quot;0 is false.&quot;</div><div class="line">fi            # 0 为真.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">echo &quot;Testing \&quot;1\&quot;&quot;</div><div class="line">if [ 1 ]      # one</div><div class="line">then</div><div class="line">  echo &quot;1 is true.&quot;</div><div class="line">else</div><div class="line">  echo &quot;1 is false.&quot;</div><div class="line">fi            # 1 为真.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">echo &quot;Testing \&quot;-1\&quot;&quot;</div><div class="line">if [ -1 ]     # 负1</div><div class="line">then</div><div class="line">  echo &quot;-1 is true.&quot;</div><div class="line">else</div><div class="line">  echo &quot;-1 is false.&quot;</div><div class="line">fi            # -1 为真.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">echo &quot;Testing \&quot;NULL\&quot;&quot;</div><div class="line">if [ ]        # NULL (空状态)</div><div class="line">then</div><div class="line">  echo &quot;NULL is true.&quot;</div><div class="line">else</div><div class="line">  echo &quot;NULL is false.&quot;</div><div class="line">fi            # NULL 为假.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">echo &quot;Testing \&quot;xyz\&quot;&quot;</div><div class="line">if [ xyz ]    # 字符串</div><div class="line">then</div><div class="line">  echo &quot;Random string is true.&quot;</div><div class="line">else</div><div class="line">  echo &quot;Random string is false.&quot;</div><div class="line">fi            # 随便的一串字符为真.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">echo &quot;Testing \&quot;\$xyz\&quot;&quot;</div><div class="line">if [ $xyz ]   # 判断$xyz是否为null, 但是...</div><div class="line">              # 这只是一个未初始化的变量.</div><div class="line">then</div><div class="line">  echo &quot;Uninitialized variable is true.&quot;</div><div class="line">else</div><div class="line">  echo &quot;Uninitialized variable is false.&quot;</div><div class="line">fi            # 未定义的初始化为假.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">echo &quot;Testing \&quot;-n \$xyz\&quot;&quot;</div><div class="line">if [ -n &quot;$xyz&quot; ]            # 更加正规的条件检查.</div><div class="line">then</div><div class="line">  echo &quot;Uninitialized variable is true.&quot;</div><div class="line">else</div><div class="line">  echo &quot;Uninitialized variable is false.&quot;</div><div class="line">fi            # 未初始化的变量为假.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line"></div><div class="line">xyz=          # 初始化了, 但是赋null值.</div><div class="line"></div><div class="line">echo &quot;Testing \&quot;-n \$xyz\&quot;&quot;</div><div class="line">if [ -n &quot;$xyz&quot; ]</div><div class="line">then</div><div class="line">  echo &quot;Null variable is true.&quot;</div><div class="line">else</div><div class="line">  echo &quot;Null variable is false.&quot;</div><div class="line">fi            # null变量为假.</div><div class="line"></div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line"></div><div class="line"># 什么时候&quot;false&quot;为真?</div><div class="line"></div><div class="line">echo &quot;Testing \&quot;false\&quot;&quot;</div><div class="line">if [ &quot;false&quot; ]              #  看起来&quot;false&quot;只不过是一个字符串而已.</div><div class="line">then</div><div class="line">  echo &quot;\&quot;false\&quot; is true.&quot; #+ 并且条件判断的结果为真.</div><div class="line">else</div><div class="line">  echo &quot;\&quot;false\&quot; is false.&quot;</div><div class="line">fi            # &quot;false&quot; 为真.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">echo &quot;Testing \&quot;\$false\&quot;&quot;  # 再来一个, 未初始化的变量.</div><div class="line">if [ &quot;$false&quot; ]</div><div class="line">then</div><div class="line">  echo &quot;\&quot;\$false\&quot; is true.&quot;</div><div class="line">else</div><div class="line">  echo &quot;\&quot;\$false\&quot; is false.&quot;</div><div class="line">fi            # &quot;$false&quot; 为假.</div><div class="line">              # 现在, 我们得到了预期的结果.</div><div class="line"></div><div class="line">#  如果我们测试以下为初始化的变量&quot;$true&quot;会发生什么呢?</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">exit 0</div></pre></td></tr></table></figure>
<p>运行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ bash test.sh</div></pre></td></tr></table></figure>
<h3 id="4-结构"><a href="#4-结构" class="headerlink" title="4.(( )) 结构"></a>4.(( )) 结构</h3><p>(( )) 结构扩展并计算一个算术表达式的值。如果表达式的结果为0，那么返回的退出状态码为1，或者是”假”。而一个非零值的表达式所返回的退出状态码将为0，或者是”true”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim test.sh</div></pre></td></tr></table></figure>
<p>输入代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"># 算术测试.</div><div class="line"></div><div class="line"># (( ... ))结构可以用来计算并测试算术表达式的结果.</div><div class="line"># 退出状态将会与[ ... ]结构完全相反!</div><div class="line"></div><div class="line">(( 0 ))</div><div class="line">echo &quot;Exit status of \&quot;(( 0 ))\&quot; is $?.&quot;         # 1</div><div class="line"></div><div class="line">(( 1 ))</div><div class="line">echo &quot;Exit status of \&quot;(( 1 ))\&quot; is $?.&quot;         # 0</div><div class="line"></div><div class="line">(( 5 &gt; 4 ))                                      # 真</div><div class="line">echo &quot;Exit status of \&quot;(( 5 &gt; 4 ))\&quot; is $?.&quot;     # 0</div><div class="line"></div><div class="line">(( 5 &gt; 9 ))                                      # 假</div><div class="line">echo &quot;Exit status of \&quot;(( 5 &gt; 9 ))\&quot; is $?.&quot;     # 1</div><div class="line"></div><div class="line">(( 5 - 5 ))                                      # 0</div><div class="line">echo &quot;Exit status of \&quot;(( 5 - 5 ))\&quot; is $?.&quot;     # 1</div><div class="line"></div><div class="line">(( 5 / 4 ))                                      # 除法也可以.</div><div class="line">echo &quot;Exit status of \&quot;(( 5 / 4 ))\&quot; is $?.&quot;     # 0</div><div class="line"></div><div class="line">(( 1 / 2 ))                                      # 除法的计算结果 &lt; 1.</div><div class="line">echo &quot;Exit status of \&quot;(( 1 / 2 ))\&quot; is $?.&quot;     # 截取之后的结果为 0.</div><div class="line">                                                # 1</div><div class="line"></div><div class="line">(( 1 / 0 )) 2&gt;/dev/null                          # 除数为0, 非法计算.</div><div class="line">#           ^^^^^^^^^^^</div><div class="line">echo &quot;Exit status of \&quot;(( 1 / 0 ))\&quot; is $?.&quot;     # 1</div><div class="line"></div><div class="line"># &quot;2&gt;/dev/null&quot;起了什么作用?</div><div class="line"># 如果这句被删除会怎样?</div><div class="line"># 尝试删除这句, 然后在运行这个脚本.</div><div class="line"></div><div class="line">exit 0</div></pre></td></tr></table></figure>
<p>运行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ bash test.sh</div></pre></td></tr></table></figure>
<h2 id="文件测试操作符"><a href="#文件测试操作符" class="headerlink" title="文件测试操作符"></a>文件测试操作符</h2><h3 id="1-操作符列举"><a href="#1-操作符列举" class="headerlink" title="1.操作符列举"></a>1.操作符列举</h3><p>操作符    说明<br>-e    文件存在</p>
<p>-a    文件存在，这个选项的效果与 -e 相同。但是它已经被“弃用”了，并且不鼓励使用。</p>
<p>-f    表示这个文件是一个一般文件（并不是目录或者设备文件）</p>
<p>-s    文件大小不为零</p>
<p>-d    表示这是一个目录</p>
<p>-b    表示这是一个块设备（软盘，光驱，等等）</p>
<p>-c    表示这是一个字符设备（键盘，modem，声卡，等等）</p>
<p>-p    这个文件是一个管道</p>
<p>-h    这是一个符号链接</p>
<p>-L    这是一个符号链接</p>
<p>-S    表示这是一个socket</p>
<p>-t    文件（描述符）被关联到一个终端设备上，这个测试选项一般被用来检测脚本中的 stdin([ -t 0 ]) 或者 stdout([ -t 1 ])是否来自于一个终端<br>-r    文件是否具有可读权限（指的是正在运行这个测试命令的用户是否具有读权限）</p>
<p>-w    文件是否具有可写权限（指的是正在运行这个测试命令的用户是否具有写权限）</p>
<p>-x    文件是否具有可执行权限（指的是正在运行这个测试命令的用户是否具有可执行权限）</p>
<p>-g    set-group-id(sgid)标记被设置到文件或目录上</p>
<p>-k    设置粘贴位</p>
<p>-O    判断你是否是文件的拥有者</p>
<p>-G    文件的group-id是否与你的相同</p>
<p>-N    从文件上一次被读取到现在为止, 文件是否被修改过</p>
<p>f1 -nt f2    文件f1比文件f2新</p>
<p>f1 -ot f2    文件f1比文件f2旧</p>
<p>f1 -ef f2    文件f1和文件f2是相同文件的硬链接</p>
<p>!    “非”，反转上边所有测试的结果（如果没给出条件，那么返回真）</p>
<h3 id="2-举例"><a href="#2-举例" class="headerlink" title="2.举例"></a>2.举例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim test.sh</div></pre></td></tr></table></figure>
<p>输入代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">[ $# -eq 0 ] &amp;&amp; directorys=`pwd` || directorys=$@</div><div class="line"></div><div class="line">for directory in $directorys; do</div><div class="line">   if [ -d $directory ]</div><div class="line">  then echo &quot;dir: + $directory&quot;</div><div class="line">  else</div><div class="line">      echo &quot;$directory is not a directory&quot;</div><div class="line">      echo &quot;Usage: $0 dir1 dir2 ...&quot;</div><div class="line">   fi</div><div class="line">done</div><div class="line"></div><div class="line">exit 0</div></pre></td></tr></table></figure>
<p>运行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ bash test.sh</div></pre></td></tr></table></figure>
<h2 id="二元比较操作符"><a href="#二元比较操作符" class="headerlink" title="二元比较操作符"></a>二元比较操作符</h2><p>##1.整数比较</p>
<p>-eq 等于</p>
<p>if [ “$a” -eq “$b” ]<br>-ne 不等于</p>
<p>if [ “$a” -ne “$b” ]<br>-gt 大于</p>
<p>if [ “$a” -gt “$b” ]<br>-ge 大于等于</p>
<p>if [ “$a” -ge “$b” ]<br>-lt 小于</p>
<p>if [ “$a” -lt “$b” ]<br>-le 小于等于</p>
<p>if [ “$a” -le “$b” ]<br>&lt; 小于(在双括号中使用)</p>
<p>((“$a” &lt; “$b”))<br>&lt;= 小于等于(在双括号中使用)</p>
<p>((“$a” &lt;= “$b”))<br>大于(在双括号中使用)<br>((“$a” &gt; “$b”))<br>= 大于等于(在双括号中使用)<br>((“$a” &gt;= “$b”))<br>2.字符串比较</p>
<p>= 等于</p>
<p>if [ “$a” = “$b” ]<br>== 等于，与=等价</p>
<p>if [ “$a” == “$b” ]<br>!= 不等号</p>
<p>if [ “$a” != “$b” ]<br>&lt; 小于，按照ASCII字符进行排序</p>
<p>if [[ “$a” &lt; “$b” ]]<br>if [ “$a” \&lt; “$b” ]<br>注意”&lt;”使用在[ ]结构中的时候需要被转义<br>大于，按照ASCII字符进行排序<br>if [[ “$a” &gt; “$b” ]]<br>if [ “$a” > “$b” ]<br>注意“&gt;”使用在[ ]结构中的时候需要被转义<br>-z 字符串为“null”，意思就是字符串长度为零 -n 字符串不为“null”</p>
<h3 id="3-算术比较与字符串比较"><a href="#3-算术比较与字符串比较" class="headerlink" title="3.算术比较与字符串比较"></a>3.算术比较与字符串比较</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim test.sh</div></pre></td></tr></table></figure>
<p>输入代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">a=4</div><div class="line">b=5</div><div class="line"></div><div class="line">#  这里的&quot;a&quot;和&quot;b&quot;既可以被认为是整型也可被认为是字符串.</div><div class="line">#  这里在算术比较与字符串比较之间是容易让人产生混淆,</div><div class="line">#+ 因为Bash变量并不是强类型的.</div><div class="line"></div><div class="line">#  Bash允许对于变量进行整形操作与比较操作.</div><div class="line">#+ 但前提是变量中只能包含数字字符.</div><div class="line">#  不管怎么样, 还是要小心.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">if [ &quot;$a&quot; -ne &quot;$b&quot; ]</div><div class="line">then</div><div class="line"> echo &quot;$a is not equal to $b&quot;</div><div class="line"> echo &quot;(arithmetic comparison)&quot;</div><div class="line">fi</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">if [ &quot;$a&quot; != &quot;$b&quot; ]</div><div class="line">then</div><div class="line"> echo &quot;$a is not equal to $b.&quot;</div><div class="line"> echo &quot;(string comparison)&quot;</div><div class="line"> #     &quot;4&quot;  != &quot;5&quot;</div><div class="line"> # ASCII 52 != ASCII 53</div><div class="line">fi</div><div class="line"></div><div class="line"># 在这个特定的例子中, &quot;-ne&quot;和&quot;!=&quot;都可以.</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">exit 0</div></pre></td></tr></table></figure>
<p>运行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ bash test.sh</div></pre></td></tr></table></figure>
<h3 id="4-检查字符串是否为null"><a href="#4-检查字符串是否为null" class="headerlink" title="4.检查字符串是否为null"></a>4.检查字符串是否为null</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim test.sh</div></pre></td></tr></table></figure>
<p>输入代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">#  str-test.sh: 检查null字符串和未引用的字符串,</div><div class="line">#+ but not strings and sealing wax, not to mention cabbages and kings . . .</div><div class="line">#+ 但不是字符串和封蜡, 也并没有提到卷心菜和国王. . . ??? (没看懂, rojy bug)</div><div class="line"></div><div class="line"># 使用   if [ ... ]</div><div class="line"></div><div class="line"></div><div class="line"># 如果字符串并没有被初始化, 那么它里面的值未定义.</div><div class="line"># 这种状态被称为&quot;null&quot; (注意这与零值不同).</div><div class="line"></div><div class="line">if [ -n $string1 ]    # $string1 没有被声明和初始化.</div><div class="line">then</div><div class="line"> echo &quot;String \&quot;string1\&quot; is not null.&quot;</div><div class="line">else  </div><div class="line"> echo &quot;String \&quot;string1\&quot; is null.&quot;</div><div class="line">fi  </div><div class="line"># 错误的结果.</div><div class="line"># 显示$string1为非null, 虽然这个变量并没有被初始化.</div><div class="line"></div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line"></div><div class="line"># 让我们再试一下.</div><div class="line"></div><div class="line">if [ -n &quot;$string1&quot; ]  # 这次$string1被引号扩起来了.</div><div class="line">then</div><div class="line"> echo &quot;String \&quot;string1\&quot; is not null.&quot;</div><div class="line">else  </div><div class="line"> echo &quot;String \&quot;string1\&quot; is null.&quot;</div><div class="line">fi                    # 注意一定要将引用的字符放到中括号结构中!</div><div class="line"></div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line"></div><div class="line">if [ $string1 ]       # 这次, 就一个$string1, 什么都不加.</div><div class="line">then</div><div class="line"> echo &quot;String \&quot;string1\&quot; is not null.&quot;</div><div class="line">else  </div><div class="line"> echo &quot;String \&quot;string1\&quot; is null.&quot;</div><div class="line">fi  </div><div class="line"># 这种情况运行的非常好.</div><div class="line"># [ ] 测试操作符能够独立检查string是否为null.</div><div class="line"># 然而, 使用(&quot;$string1&quot;)是一种非常好的习惯.</div><div class="line">#</div><div class="line"># 就像Stephane Chazelas所指出的,</div><div class="line">#    if [ $string1 ]    只有一个参数, &quot;]&quot;</div><div class="line">#    if [ &quot;$string1&quot; ]  有两个参数, 一个是空的&quot;$string1&quot;, 另一个是&quot;]&quot;</div><div class="line"></div><div class="line">echo</div><div class="line"></div><div class="line">string1=initialized</div><div class="line"></div><div class="line">if [ $string1 ]       # 再来, 还是只有$string1, 什么都不加.</div><div class="line">then</div><div class="line"> echo &quot;String \&quot;string1\&quot; is not null.&quot;</div><div class="line">else  </div><div class="line"> echo &quot;String \&quot;string1\&quot; is null.&quot;</div><div class="line">fi  </div><div class="line"># 再来试一下, 给出了正确的结果.</div><div class="line"># 再强调一下, 使用引用的(&quot;$string1&quot;)还是更好一些, 原因我们上边已经说过了.</div><div class="line"></div><div class="line"></div><div class="line">string1=&quot;a = b&quot;</div><div class="line"></div><div class="line">if [ $string1 ]       # 再来, 还是只有$string1, 什么都不加.</div><div class="line">then</div><div class="line"> echo &quot;String \&quot;string1\&quot; is not null.&quot;</div><div class="line">else  </div><div class="line"> echo &quot;String \&quot;string1\&quot; is null.&quot;</div><div class="line">fi  </div><div class="line"># 未引用的&quot;$string1&quot;, 这回给出了错误的结果!</div><div class="line"></div><div class="line">exit 0</div></pre></td></tr></table></figure>
<p>运行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ bash test.sh</div></pre></td></tr></table></figure>
<h3 id="5-zmore"><a href="#5-zmore" class="headerlink" title="5.zmore"></a>5.zmore</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim test.sh</div></pre></td></tr></table></figure>
<p>输入代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"># zmore</div><div class="line"></div><div class="line">#使用&apos;more&apos;来查看gzip文件</div><div class="line"></div><div class="line">NOARGS=65</div><div class="line">NOTFOUND=66</div><div class="line">NOTGZIP=67</div><div class="line"></div><div class="line">if [ $# -eq 0 ] # 与if [ -z &quot;$1&quot; ]效果相同</div><div class="line"># (译者注: 上边这句注释有问题), $1是可以存在的, 可以为空, 如:  zmore &quot;&quot; arg2 arg3</div><div class="line">then</div><div class="line"> echo &quot;Usage: `basename $0` filename&quot; &gt;&amp;2</div><div class="line"> # 错误消息输出到stderr.</div><div class="line"> exit $NOARGS</div><div class="line"> # 返回65作为脚本的退出状态的值(错误码).</div><div class="line">fi  </div><div class="line"></div><div class="line">filename=$1</div><div class="line"></div><div class="line">if [ ! -f &quot;$filename&quot; ]   # 将$filename引用起来, 这样允许其中包含空白字符.</div><div class="line">then</div><div class="line"> echo &quot;File $filename not found!&quot; &gt;&amp;2</div><div class="line"> # 错误消息输出到stderr.</div><div class="line"> exit $NOTFOUND</div><div class="line">fi  </div><div class="line"></div><div class="line">if [ $&#123;filename##*.&#125; != &quot;gz&quot; ]</div><div class="line"># 在变量替换中使用中括号结构.</div><div class="line">then</div><div class="line"> echo &quot;File $1 is not a gzipped file!&quot;</div><div class="line"> exit $NOTGZIP</div><div class="line">fi  </div><div class="line"></div><div class="line">zcat $1 | more</div><div class="line"></div><div class="line"># 使用过滤命令&apos;more.&apos;</div><div class="line"># 当然, 如果你愿意, 也可以使用&apos;less&apos;.</div><div class="line"></div><div class="line"></div><div class="line">exit $?   # 脚本将把管道的退出状态作为返回值.</div><div class="line"># 事实上, 也不一定非要加上&quot;exit $?&quot;, 因为在任何情况下,</div><div class="line"># 脚本都会将最后一条命令的退出状态作为返回值.</div></pre></td></tr></table></figure>
<p>运行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ bash test.sh</div></pre></td></tr></table></figure>
<h3 id="6-compound-和-comparison"><a href="#6-compound-和-comparison" class="headerlink" title="6.compound 和 comparison"></a>6.compound 和 comparison</h3><p>-a 逻辑与 exp1 -a exp2 如果表达式 exp1 和 exp2 都为真的话，那么结果为真。</p>
<p>-o 逻辑或 exp1 -o exp2 如果表达式 exp1 和 exp2 中至少有一个为真的话，那么结果为真。</p>
<p>注意：这与Bash中的比较操作符 &amp;&amp; 和 || 非常相像，但是这个两个操作符是用在双中括号结构中的。</p>
<p>[[ condition1 &amp;&amp; condition2 ]]<br>-o和-a操作符一般都是和test命令或者是单中括号结构一起使用的</p>
<p>if [ “$exp1” -a “$exp2” ]</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2017/02/09/ch7-条件判断/" data-id="ciyy3eb5g0007uy9yp7dp11ol" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Bash/">Bash</a></div><div class="post-nav"><a href="/2017/02/08/ch6-退出和退出状态码/" class="next">退出和退出状态码</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Bash/" style="font-size: 15px;">Bash</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/09/ch7-条件判断/">条件判断</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/08/ch6-退出和退出状态码/">退出和退出状态码</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/08/ch5-引用和转义/">引用和转义</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/07/ch4-变量赋值和替换/">变量和参数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/ch2-Bash中的特殊字符（上）/">Bash中的特殊字符（上）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/ch3-Bash中的特殊字符（下）/">Bash中的特殊字符（下）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/ch1-Bash介绍与入门/">Bash介绍与入门</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Linux基础.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>